<!DOCTYPE html>
<html lang="en">
<head id="head">
  <!--Page Data-->
  <title>Schmidts.Page</title>
  <meta name="description" content="Schmidts.Page is an Alpha rendition of what will be later released as a set of tools for RPGs on the fly.">
  <link rel="shortcut icon" href="/Site-Stuff/Assets/Images/golden_bed.ico">
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f5f5f5;
    }
  
    h1 {
      color: #333;
      font-size: 24px;
      text-align: center;
    }
  
    p {
      line-height: 1.5;
      margin-bottom: 20px;
    }
  
    .button {
      display: inline-block;
      padding: .25em;
      background-color: #007bff;
      color: #fff;
      text-decoration: none;
      border-radius: 4px;
      height: max-content;
    }
  
    .button:hover {
      background-color: #0069d9;
    }
  </style>
  
</head>
<body>
    <header id="site-wide-nav-header">
        
    </header>
    <main>
        <label for="userInput">Enter dice roll:</label>
        <input type="text" id="userInput">
        <button class="button" id="rollDiceBtn">Roll Dice</button>
        
        <label for="minVal">Enter minimum value:</label>
        <input type="number" id="minVal">
        <label for="maxVal">Enter maximum value:</label>
        <input type="number" id="maxVal">
        <button class="button" id="rollAbilitiesBtn">Roll Abilities</button>
        
        <form id="displayOptions">
          <legend>Display Results:</legend>
          <label>
            <input type="checkbox" name="displayOption" value="total" checked> Total
          </label>
          <label>
            <input type="checkbox" name="displayOption" value="high" checked> High
          </label>
          <label>
            <input type="checkbox" name="displayOption" value="low" checked> Low
          </label>
          <label>
            <input type="checkbox" name="displayOption" value="mostCommon"> Most Common
          </label>
          <label>
            <input type="checkbox" name="displayOption" value="leastCommon"> Least Common
          </label>
          <label>
            <input type="checkbox" name="displayOption" value="array"> Array/List
          </label>
        </form>
        
        <span id="totalResult"></span>
        <span id="highResult"></span>
        <span id="lowResult"></span>
        <span id="mostCommonResult"></span>
        <span id="leastCommonResult"></span>
        <span id="arrayResult"></span>
      
    </main>
    <footer id="main-footer">

    </footer>
</body>
<script src="/Site-Stuff/Scripting/Snippets/template_level_snippets.js"></script>
<script>
    // Function to roll the dice
    function rollDice() {
      // Get the user input
      const userInput = document.getElementById('userInput').value;
      // Split the input to get the number of dice and the number of sides
      const [numDice, numSides] = userInput.split('d');
      // Roll the dice and get the individual rolls and total
      let rolls = [];
      let total = 0;
      for (let i = 0; i < numDice; i++) {
        const roll = Math.floor(Math.random() * numSides) + 1;
        rolls.push(roll);
        total += roll;
      }
      // Display the result to the user
      const displayOptions = document.getElementsByName('displayOption');
      for (const option of displayOptions) {
        const spanId = option.value + 'Result';
        const resultSpan = document.getElementById(spanId);
        if (option.checked) {
          switch (option.value) {
            case 'total':
              resultSpan.textContent = `Total: ${total}`;
              break;
            case 'high':
              resultSpan.textContent = `High: ${Math.max(...rolls)}`;
              break;
            case 'low':
              resultSpan.textContent = `Low: ${Math.min(...rolls)}`;
              break;
            case 'mostCommon':
              resultSpan.textContent = `Most Common: ${getMode(rolls)}`;
              break;
            case 'leastCommon':
              resultSpan.textContent = `Least Common: ${getLeastCommon(rolls)}`;
              break;
            case 'array':
              resultSpan.textContent = `Array/List: [${rolls.join(', ')}]`;
              break;
          }
        } else {
          resultSpan.textContent = '';
        }
      }
    }

    // Function to get the mode (most common elements) in an array
    function getMode(arr) {
      const counts = {};
      for (const num of arr) {
        counts[num] = (counts[num] || 0) + 1;
      }
      const maxCount = Math.max(...Object.values(counts));
      const modes = [];
      for (const [num, count] of Object.entries(counts)) {
        if (count === maxCount) {
          modes.push(num);
        }
      }
      return modes.join(', ');
    }

    // Function to get the least common elements in an array
    function getLeastCommon(arr) {
      const counts = {};
      for (const num of arr) {
        counts[num] = (counts[num] || 0) + 1;
      }
      const leastCommon = [];
      const minCount = Math.min(...Object.values(counts));
      for (const [num, count] of Object.entries(counts)) {
        if (count === minCount) {
          leastCommon.push(num);
        }
      }
      return leastCommon.join(', ');
    }
    
    // Function to roll abilities
    function rollAbilities() {
        const minVal = Number(document.getElementById('minVal').value);
        const maxVal = Number(document.getElementById('maxVal').value);
        const resultDisplay = document.getElementById('resultDisplay');
        let abilities = [];
        let tries = 0;
        while (abilities.length < 6 || abilities.reduce((acc, val) => acc + val) < minVal || abilities.reduce((acc, val) => acc + val) > maxVal) {
            tries++;
            abilities = [];
            let rolls = [];
            for (let i = 0; i < 6; i++) {
              rolls = [];
              for (let j = 0; j < 4; j++) {
                  rolls.push(Math.floor(Math.random() * 6) + 1);
              }
              rolls.sort((a, b) => b - a);
              abilities.push(rolls[0] + rolls[1] + rolls[2]);
            }
            abilities.sort((a, b) => b - a);
        }
        resultDisplay.textContent = `Total: ${abilities.reduce((acc, val) => acc + val)} High: ${Math.max(...abilities)} Low: ${Math.min(...abilities)} Most Common: ${getMode(abilities)} Least Common: ${getLeastCommon(abilities)} [${abilities.join(', ')}] It took ${tries} tries ${String.fromCodePoint(0x1F603)}`;
    }
    
    // Add event listeners to the buttons
    document.getElementById('rollDiceBtn').addEventListener('click', rollDice);
    document.getElementById('rollAbilitiesBtn').addEventListener('click', rollAbilities);
</script>
</html>
